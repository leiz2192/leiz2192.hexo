---
title: C++函数重载和函数重写
date: 2020-12-05 22:44:41
tags:
categories:
---

## 基本概念

对于C++中经常出现的函数名称相同但是参数列表或者返回值不同的函数，主要存在三种情况：

### 函数重写（override）

函数重载主要实现了父类与子类之间的多态性，子类中定义与父类中名称和参数以及返回值都相同的虚函数。

- 重写的函数不能是static函数，必须是virtual函数,即函数在原始的基类中被声明为虚函数；
- 重写函数与基类函数分在两个类的声明和定义中，这也就导致二者的作用域不同；
- 重写函数的名称、参数列表以及返回值（即函数原型）都要与基类的函数相同；
- 重写函数的访问修饰符可以不同，尽管virtual函数是private的，在派生类中重写的函数可以是public或protect的

### 函数重载（overload）

指函数名称相同但是参数类型或者参数顺序不同的相同作用域中的函数，函数重载不能靠返回值来进行区分；

### 重定义(redefine)

指子类重新定义父类中的非虚函数（参数列表可以不同），这样父类中的对应函数将被隐藏。

比如以下程序编译时提示`error: no matching function for call to ‘B::func(int)’`

```c++
#include <iostream>

class A {
public:
    void func(int a) {
        std::cout << "A: " << a << "\n";
    }
};

class B : public A {
public:
    void func(int a, int b) {
        std::cout << "B: " << a << "\n";
    }
};

int main() {
    B b;
    b.func(8);

    return 0;
}
```

## 重写（override）与重载(overload)的区别

- 函数重写是子类和父类之间的继承关系，是垂直关系；方法的重载是同一个类中方法之间的关系，是水平关系；
- 重写需要子类和父类中的两个函数的函数原型完全相同；重载要求两个函数参数列表不同；
- 在重写关系中，调用具体调用哪一个函数是根据（对象对应存储空间的实际类型）为准的，这涉及到动态绑定和静态绑定的问题，也就是虚函数的调用机制，而函数重载主要是靠形参列表的不同来区分具体调用哪个函数的。
